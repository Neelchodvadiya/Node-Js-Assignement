<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <style>form {
  display: flex;
  flex-direction: column;
  width: 300px;
  margin: auto;
}

label {
  margin-top: 10px;
  margin-bottom: 5px;
}

input {
  padding: 5px;
  margin-bottom: 10px;
  border-radius: 5px;
  border: none;
  box-shadow: 0 0 5px gray;
}

input[type="submit"] {
  background-color: blue;
  color: white;
  padding: 10px;
  cursor: pointer;
}

input[type="file"] {
  margin-bottom: 20px;
}</style>
</head>
<body>

    <form method="post"  enctype="multipart/form-data" action="/updateStudent/{{records._id}}">
  <label for="name">Name:</label>
  <input type="text" id="name" value="name" name="name" > 

  <label for="email">Email:</label>
  <input type="email" id="email" value="email" name="email" > 

   <label for="phone">phone Number:</label>
  <input type="phone" id="phone" name="phone" value="{{records.phone}}" > 

   <label for="address">address:</label>
  <textarea type="address" id="address" name="address"  > </textarea>

 
  <label for="firm-image">Firm Image:</label>
  <input type="file" id="firm-image" name="Images" accept="image/*" multiple> 

  <input type="submit" value="Register">
  <a href="/Update"></a>
</form>

<script>
     const url = new URLSearchParams(window.location.search);
        const id = url.get("id");

        $.ajax({
          type: "GET",
          url: `http://localhost:8000/viewStudent/${id}`,
          success: (data) => {
            console.log(data);
            $("#name").val(data.data.name);
            $("#email").val(data.data.email);
            $("#phone").val(data.data.phone);
          
            $("textarea").html(data.data.address);
          },
        });

        $("#form").submit((e) => {
          e.preventDefault();
          const formdata = {
            name: $("#name").val(),
            rollNo: $("#rollNo").val(),
            email: $("#email").val(),
            password: $("#password").val(),
            contact: $("#contact").val(),
          };

          $.ajax({
            type: "PUT",
            url: "http://localhost:3000/students/" + id,
            data: JSON.stringify(formdata),
            contentType: "application/json",
            success: () => {
              console.log("data added successfully");
              $("#re")[0].click();
            },
          });
        });
</script>


</body>
</html>